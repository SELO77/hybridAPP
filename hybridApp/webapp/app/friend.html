<!doctype html>
<html class="no-js" lang="">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="x-ua-compatible" content="ie=edge"> <!-- -->
		<title>DodamDodam</title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1 minimum-scale=1, maximum-scale=1, user-scalable=no"> <!-- 모바일 친화적 뷰 설정 -->

		<meta name="description" content="">
		<meta name="author" content="">
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
		<link rel="stylesheet" href="css/__main.css">
		<link rel="stylesheet" href="css/bootstrap.css">
		<!-- 현업에 혼자 코딩하는 사람 없습니다....... 가독성 생각해서 작성해주세요.
		아래 형식들 정리해 놓았으니 HTML 코드 부분 Script 코드 부분 확인하고 작성해주세요.
		마지막으로 코드 정렬 하면서 작성해주세요. 예) 탭질 잘할것. -->
		<!-- 아래 부분은 CSS 추가 부분 입니다.-->
		<!-- -[지훈] friend List항목 2EA -->
		<link rel="import" href="import/friendReqList.html">
		<link rel="import" href="import/friendList.html">
		

		
	</head>
	<body >
			<!--[if lt IE 8]>
					<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
			<![endif]-->			

			<!-- HTML 코드 작성 부분 입니다 -->
			<!-- [지훈] 친구 관리 화면 Start -->		
			
			<div id="friend_req_list">
				<ul class="list-group">
  					<li class="list-group-item">
  						친구 요청 <span class="badge" id="req_count">+</span>
  					</li>
  				</ul>
  			</div>

			<div id="friend_list">&nbsp; <!-- &nbsp; 지우면  <li class="list-group-item"> 상하 크기 커짐! 지우지말것! -->
				<ul class="list-group">
  					<li class="list-group-item">내 친구 목록<span class="badge" id="fr_count">+</span>
  					</li>
				</ul>
			</div>

			<!-- [지훈] 친구 관리 화면 End -->	
			<!-- ip 등 meta data 가져오기 -->
			<script src="js/jihoon/getMetaData.js"></script>

			<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
			<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.3.min.js"><\/script>')</script>
			<script type="text/javascript" src="cordova.js"></script>
			<!-- script plug in start -->
			<script src="js/vendor/modernizr-2.8.3.min.js"></script>
			<!-- bootStrap.js CDN -->
			<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>  
			<script src="js/vendor/jquery-1.11.3.min.js" ></script>
			<script src="js/vendor/jquery.ui.widget.js"></script> 

			<!--  아래는 스크립트 라이브러리 추가 및 스크립트 작성 영역입니다.-->
			<!-- [작성자] 추가 라이브러리 요약 -->
			<!-- 라이브러리 추가는 아래 형식으로 하시오 -->
			<script src="js/handlebars-v4.0.5.js" ></script>
			<!-- 스크립트 작성 부분입니다 -->
			<script>
				//이 곳을 벗어나 스크립트를 작성하지마시오.
				var fr_req_link = document.querySelector('link[href="import/friendReqList.html"]');
				var fr_link = document.querySelector('link[href="import/friendList.html"]');
				
				
	              $.ajax(getMetaData('friendURL')+"getFriendList",{
	                method: "post",
	                crossDomain : true,
	                dataType : "json",	    
	                contentType: "application/json; charset=UTF-8",
	                data: JSON.stringify({
                   	uNo : getMetaData("user").uNo
                	}),
	                success: function(result){

	                 	$("#req_count").text(result.frReqCount);
	                  	$("#fr_count").text(result.frCount);
	                  	var frReqTemp = fr_req_link.import;
	                  	var frTemp = fr_link.import;

	                  	/*친구 요청목록 Handlebars 사용부분 */
	                  	var reqSource = frReqTemp.querySelector('#friendReqList_template').text;
	                        console.log(reqSource);
	                    var reqTemplate = Handlebars.compile(reqSource);
	                                     var reqHtml = reqTemplate(result);
	                      $('#friend_req_list').append(reqHtml);

						/*친구 목록 Handlebars 사용부분 */
	                	var frSource = frTemp.querySelector('#friend_template').text;
	                        console.log(frSource);
	                    var reqTemplate = Handlebars.compile(frSource);
	                                     var frHtml = reqTemplate(result);
	                      $('#friend_list').append(frHtml);
	                }
	              });
	          

			</script>
			<!-- 스크립트 작성 부분 끝입니다. --> 

			<script>				
				document.addEventListener("backbutton", onBackKeyDown, false);
				function onBackKeyDown(){
					 //window.plugins.toast.show('Really Exit?'.'short'.'center',)
					 testLogoutSheet();      
				 }
				//Action sheet
				function testLogoutSheet() {
					var options = {
						'androidTheme' : window.plugins.actionsheet.ANDROID_THEMES.THEME_HOLO_LIGHT,
						'title': 'Are you sure to close it?',
						'buttonLabels': ['No','Yes'],
						'androidEnableCancelButton' : true,
						'winphoneEnableCancelButton' : true,
							//'addCancelButtonWithLabel': 'Cancel'
						};  
						window.plugins.actionsheet.show(options, callback);
					}

					var callback = function(buttonIndex) {
						setTimeout(function() {
							//alert('button index clicked: ' + buttonIndex);
							if (buttonIndex == 2) {
							 navigator.app.exitApp();
							 };
						 });
					};
		</script>
	</body>
</html>